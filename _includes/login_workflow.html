<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="951px" viewBox="-0.5 -0.5 951 621" content="&lt;mxfile modified=&quot;2020-03-25T19:06:17.984Z&quot; host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:73.0) Gecko/20100101 Firefox/73.0&quot; etag=&quot;IHFAfgapWv0NEWkw5FqQ&quot; version=&quot;12.9.3&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;NEN49luqhqemV9Vau6yv&quot; name=&quot;Page-1&quot;&gt;7VxZc+K4Fv41VGWmCsq7zSOQkDu3k+7cyXR6el4oYwvjaWM5XgLpX38lecFaIIZgAszkgYCwZHGW7xx9R3JHHS1Wt7Edze+hC4KOIrmrjnrdURRZNhX0D7e85i2WZuQNXuy7xUXrhkf/JygapaI1812QUBemEAapH9GNDgxD4KRUmx3HcElfNoMBfdfI9gDX8OjYAd/6zXfTefm7jP76i/8A35sXt7YUM/9iYZcXF78kmdsuXNaa1JuOOoohTPN3i9UIBFh4pVzyfuMN31YTi0GYNumwcoLZ7dPD94X7/fef30JouV+8bqGdFzvIih9cTDZ9LSUAQneABYk+hTBEjcN5ugjQJxm95SdRzAu4lFyLKd0CuABp/IouWK6lqRcSmtfkWLbFILBT/4XWhl0o1auGq+7wAH00E0UqDFDRrLxLYX5mqY1yiARmsQOKXnXpcQOZPZ0aSpF0eqjUjj2QckOhN7Ufvm4i6tlBVeqFq0rXpMOoih1IM6SjKkrfSVFOYCeJ75yXrmRFZr1hf8eStg/UsrYMTltO4Ds/OngaxnOG0XkYQM8P1x85daZgldIKjEHi/7Sn5AIJfY7w9MkP0ocd/Rq12IHvhVj/SMUgRg0vIE59FHgGxRcL33Vx/2FgT0EwtJ0fXgyz0B3BAMbkvuqM/AntZatlojuBFaX6InwWM6YiFGVeRa+u1JNkjbaAEqDeaVpdWemJBy7HgLNZAtqBWJHrGgHWreu/UDovbQGrvlvocoAFmauzZiuGV/wn40zLhkHgwRjYqMs4hqhP6JaXoKlP2W6ojcyAbj34pK4eHwa/VK2xYBZvzoxxjSSN4Y8qdZJpL0EpUYSvW6w8nD32ZgFcOnM7TnsJ8vp0gmxkuJz7KXiMbAdfuESX1XwnALNUaP3yBkPfaNCKxIZ3ucShGqKaOo+opr7Zwin73NkYeWQ6tN6TyA55e6xptn6BqBNGJdpyRT1OwERmyMUei1sKMued7UWXrA+0l/8tfk5f/1opvvfZu/9zeK2anz9dfH5YrRzfmx9amn68VF6oKq01z77LMxUJLcQzNMTlOqB1eg7YIO8vhZktgoGTwnrad4ezvAeY+KkPsdymME3holn6x6aOKYxoJcIsDfwQjCqSRGpBJX2F1ofM60NVeX0YbelDFD8vCRArAb8XEGWpzwKi3NoiTKgqaydVneWSWdFZIavqvgFMZbFP1Y6rr/72AJbHmdubP0g2OYZ2hgSsjPE/GBOKd5w4kCCh7TgI1dAkDXtBwgZ5RaElLQJg3pBnnqS1bCpTzHo/tOyOYJiASfpKRneguzEIcvNlxsJ9JyjSBQEIPX4yzNfbZkVfOkHCn0Ms3UdFNzbOjhog8JFVT4hKZJP5MoAFWz2LOWm4fozwfpLFPg46Mbo/nos7Qcu8SQzSLA7RdwHnayfIZ2yFjZPmM6ReX+pTfzTU9iRTqv+1wXYIpScr70fdv7NFVOYQduycAQ5bKpv9q9a+1KXO4XD/uDgs84u+0uk7uFCGXgruUopiuIhSEbdzps5fme9Je/9x2EyxgA5QiOD9m6z6+D6keewH55OOsb6rSfumY8qbQ7UNA/xSp+AHJAfhAXrv20HSUUa5byRYJ+RDr9e7JEQ4i/qGpn0QHpTLw39YvOe9U9b2c/SKYSoHYhdwLbt5RcmsFahKuYiomF8sAsJpktNAacQVehJhSQdTi+OcxCfrAnVMFlDqdY4TohUa+QaJYYjtCNstekVmA0PidPCHD84WTip/OWk4UXuSSq0faBZO78nMmC0CzG6M24UAjGKweyH0fTMJXaUBRj8yDVfuXdvO6zx8ecTEzh64Mi3LheOCEUoh+rwLQcNVIJc+HkjKiZ7RxkIkuWCCPNmf+aRusrnCva1S8uHQhTn7Wnvu8TtAWumhpwxpH7diUg7AQ58fgOmqxkjc0PdmRJiB2tt6J1YgT0zbjoMSkkmBNHjRA1YRypYmfnhBSx/lLKhQjgyxepJxLOfWWqFDTt659TdSiuZFJ2ag9vZpitXHJ5e1RCSpcgzCd3YX1P4HOheo6lFs9iHau7TGBjbTYFOKEVkHoeVP/EKYlwQ4cWHJ54go2jmQKR+XKhj/TDJFlWkQ2DdR4GCpYaKA5Gm/1i4rfKUNBfNkS8cc5tkE4VkwdqiDGoNKw8eISHuGnHs+oS4esQTN1tVIfdA8cUlw5kI2gakGXmjiG+Xlbtw2Bch4CjQqauy4OczIL+6Y1xeU9BhnQdAcpwK0vL5fWHdf/nSC712w/Py7CqZOVxaBFLesduaAnHfgSgXNl8ncmEkKY9CpVRsa9vNACGKyy0Mqd4vYackmbt7L8aYBbwTWHXYcMpClWgWNXINe2RJgLwtt+2xw865XD7eyPl7ePOt/aH3v76E+Fhf4dttHGpNpNtognkVurpgrGOfWgj7+gt5lyZpRabgDvLVJlnZHr/okhrzehMANdrzTkP6ufe/vgdliV+1hQXaTS+wMp5qM8FRSLEszNFPXLJVyHEPu9/p9lEroqqyautTfGVJNlrDotrGKFPsczzCIbY61sDeVT7bj5uefZaWm6tz6DwJhssxS1RXTUwcxTQBibKnrYCCmiDbDX3wizTL95r4lA7SgZ1Rqtlc0ECuQj0J5RJD8cAbPM93cbqn/pptiAami8tHlu7KuUPLW991OyDFs7W0mFKuPr36QLdziXInh1LDLT+zIx7W9akv3hlrc2SJAZeCnjAAf6P+iYwEX7/+WQj9ixNi7+s8sMI2GgbwVTkyoYI3nEy4z1FeWfMqOLiynmS04+3X6ZMzGrnz3dHurWc7X/vy/N10BPXr5vl5xOaWL7hvr2fzfaC/WC7WnvCPUO1mM9dPNXX+8Mc6fvu9vNeyTdv1yo0ObMR4sAv3lLtE+XQff7hRn8DpO+8JDtfzJv5LFxfRdQ+a3S6yl7CThB1HEdujCBXqjKt3pK+EekzT2Q483VOmqSx/BK0kZP93+PJO3J0WVeX/9tdH0pGYzan7/6vRgOYFkbiu6cUVNrvm4ZZNfNlzZRPVTOwFdQ8OAm58UJMhK6t5ki++I+PuIKB7ZcBTYDnDrt/V3FjE/FfQT8eDPGS52dYoTTFVFPz/VlGRRBGPsEQ+fRjdbZ7CH2g+4P3BjRNvh2TQcxaMIjtYrZrXPvR742AC1D2+npIPQS7rfPOc37+Hmy/2TvlIEEaQqEFA5oUROn339rYGs2mA8N/Fsdb5TFiQMh+A7JSkEmfT9Phh+er51shczWj0LnxLBGeDNKo1tsp8/r3rxBQypPAzdzKKfMES8st0OYN/CRzEJYienxR3MXdMESlOOqbSDPZ+AyWMbyeVYj/QzGaHveUpG0VjtMQMdLrUV6oonIdbHY04zJW2cajKPe91oqaexGm0lKRX+aOFJduZkwtc8KA282naEt55w1zC6vwvuLDpAyeXjiepPMToM1KGP66cN56JfP7NZvfk/&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://app.diagrams.net/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:621px;"><defs/><g><path d="M 168 610 L 167.5 95" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 460 610 L 460 350" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 41.5 110 L 153.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 158.88 110 L 151.88 113.5 L 153.63 110 L 151.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 111px; margin-left: 88px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">click "login"</div></div></div></foreignObject><text x="88" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">click "login"</text></switch></g><ellipse cx="165" cy="47.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 48px; margin-left: 130px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div style="text-align: center"><b>Algorea Frontend</b></div><div style="text-align: center"><b>(SPA)<br /></b></div></div></div></div></foreignObject><text x="130" y="51" fill="#000000" font-family="Helvetica" font-size="12px">Algorea Fron...</text></switch></g><ellipse cx="466" cy="47.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 48px; margin-left: 431px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><div style="text-align: center"><span>Algorea </span><span>Backend</span></div></div></div></div></foreignObject><text x="431" y="51" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">Algorea Back...</text></switch></g><path d="M 766 610 L 765.5 95" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="766" cy="47.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 48px; margin-left: 731px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><div style="text-align: center">Login Module</div></div></div></div></foreignObject><text x="731" y="51" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">Login Module</text></switch></g><ellipse cx="28.5" cy="8.13" rx="8.25" ry="8.125" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 28.5 16.25 L 28.5 43.33 M 28.5 21.67 L 12 21.67 M 28.5 21.67 L 45 21.67 M 28.5 43.33 L 12 65 M 28.5 43.33 L 45 65" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 30 610 L 29.5 100" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 179.5 220 L 752.13 229.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 757.38 229.98 L 750.32 233.36 L 752.13 229.89 L 750.44 226.36 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 230px; margin-left: 464px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>GET /oauth/authorize?scope=account&amp;state=&lt;state&gt;&amp;response_type=code</div><div>&amp;code_challenge=&lt;code_challenge&gt;&amp;code_challenge_method=S256</div>&amp;client_id=17&amp;locale=fr&amp;redirect_uri=urlencoded_SPA_return_url</div></div></div></foreignObject><text x="464" y="234" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">GET /oauth/authorize?scope=account&amp;state=&lt;state&gt;&amp;response_type=code...</text></switch></g><path d="M 755.5 270 L 184.87 279.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 179.62 279.98 L 186.56 276.36 L 184.87 279.89 L 186.68 283.36 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 269px; margin-left: 459px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">redirect to login prompt<br /></div></div></div></foreignObject><text x="459" y="273" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">redirect to login prompt&#xa;</text></switch></g><path d="M 184.87 290 L 742.13 290" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 179.62 290 L 186.62 286.5 L 184.87 290 L 186.62 293.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 747.38 290 L 740.38 293.5 L 742.13 290 L 740.38 286.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 291px; margin-left: 416px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">enter credentials, consent, ...<br /></div></div></div></foreignObject><text x="416" y="294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">enter credentials, consent, ...&#xa;</text></switch></g><path d="M 748.5 304 L 170.71 317.05 C 170.63 313.15 164.63 313.28 164.72 317.18 L 164.72 317.18 L 46.37 319.86" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 41.12 319.97 L 48.04 316.32 L 46.37 319.86 L 48.19 323.32 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 314px; margin-left: 397px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">302 redirect to http<b>s</b>://spa_url?code=...&amp;state=... + set session cookie</div></div></div></foreignObject><text x="397" y="318" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">302 redirect to https://spa_url?code=...&amp;state=... + set session cookie</text></switch></g><path d="M 181.5 390 L 443.64 399.76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448.88 399.96 L 441.76 403.2 L 443.64 399.76 L 442.02 396.2 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 395px; margin-left: 316px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>POST http<b>s</b>://backend/auth/token</div><div><span>with code,</span> code_verifier<br /></div></div></div></div></foreignObject><text x="316" y="399" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">POST https://backend/auth/token...</text></switch></g><path d="M 454.5 540 L 181.36 549.77" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 176.12 549.96 L 182.99 546.21 L 181.36 549.77 L 183.24 553.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 550px; margin-left: 304px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">access_token, expire_in<br /></div></div></div></foreignObject><text x="304" y="554" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">access_token, expire_in&#xa;</text></switch></g><path d="M 470 400 L 743.64 409.77" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 748.88 409.96 L 741.76 413.21 L 743.64 409.77 L 742.01 406.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 405px; margin-left: 611px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">POST https://login-module<span>/oauth/token</span><br />with code, code_verifier,  server secret</div></div></div></foreignObject><text x="611" y="409" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">POST https://login-module/oauth/token...</text></switch></g><path d="M 751 440 L 476.36 449.77" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 471.12 449.96 L 477.99 446.21 L 476.36 449.77 L 478.24 453.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 439px; margin-left: 600px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">{access token:...<span>, refresh_token:..., <br /></span>expires_in: 3600, type: bearer, scope: null }<br /></div></div></div></foreignObject><text x="600" y="443" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">{access token:..., refresh_token:...,...</text></switch></g><rect x="770" y="274" width="180" height="60" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 281px; margin-left: 772px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>check credentials, <br /></div><div>store consent</div><div>generate authorization code</div></div></div></div></foreignObject><text x="772" y="293" fill="#000000" font-family="Helvetica" font-size="12px">check credentials,...</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 504px; margin-left: 258px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div style="text-align: right"><span>update (or create) user</span></div><div style="text-align: right"><span>store access_token &amp; </span><span>refresh_token</span></div></div></div></div></foreignObject><text x="258" y="508" fill="#000000" font-family="Helvetica" font-size="12px">update (or create) user...</text></switch></g><rect x="31.5" y="540" width="140" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-end; width: 1px; height: 1px; padding-top: 547px; margin-left: 170px;"><div style="box-sizing: border-box; font-size: 0; text-align: right; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">store access_token </div></div></div></foreignObject><text x="170" y="559" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="end">store access_token </text></switch></g><path d="M 450 590 L 177.86 599.77" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 172.62 599.96 L 179.49 596.21 L 177.86 599.77 L 179.74 603.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 589px; margin-left: 301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">user info<br /></div></div></div></foreignObject><text x="301" y="593" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">user info&#xa;</text></switch></g><path d="M 472 470 L 743.64 479.77" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 748.88 479.96 L 741.76 483.21 L 743.64 479.77 L 742.01 476.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 475px; margin-left: 612px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">GET <span>/user_api/account</span> </div></div></div></foreignObject><text x="612" y="479" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">GET /user_api/account </text></switch></g><path d="M 748 490 L 476.36 499.77" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 471.12 499.96 L 477.99 496.21 L 476.36 499.77 L 478.24 503.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 500px; margin-left: 599px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">user info<br /></div></div></div></foreignObject><text x="599" y="504" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">user info&#xa;</text></switch></g><path d="M 180 570 L 443.64 579.76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448.88 579.96 L 441.76 583.2 L 443.64 579.76 L 442.02 576.2 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 575px; margin-left: 284px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">GET <span>/current-user/</span></div></div></div></foreignObject><text x="284" y="579" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">GET /current-user/</text></switch></g><rect x="171.5" y="100" width="278.5" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 107px; margin-left: 174px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>Generate:</div><div>- state: a random 32-byte string  (-&gt;store it)<br /></div><div>- code_verifier**: a random 32-byte string  (-&gt;store it)</div><div>- code_challenge**: sha256(code_verifier)</div><div><i>(all base-64 encoded with +,/,= replaced)</i></div><div><i>(** requires login-module to support PKCE)</i><br /></div><div><br /></div></div></div></div></foreignObject><text x="174" y="119" fill="#000000" font-family="Helvetica" font-size="12px">Generate:...</text></switch></g><rect x="50" y="590" width="110" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-end; width: 1px; height: 1px; padding-top: 597px; margin-left: 158px;"><div style="box-sizing: border-box; font-size: 0; text-align: right; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">update user info in UI</div></div></div></foreignObject><text x="158" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="end">update user info i...</text></switch></g><rect x="171.5" y="330" width="120" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 337px; margin-left: 174px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>Extract code &amp; state</div><div>Verify state<br /></div></div></div></div></foreignObject><text x="174" y="349" fill="#000000" font-family="Helvetica" font-size="12px">Extract code &amp; state...</text></switch></g><path d="M 47 334 L 158.63 334" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 163.88 334 L 156.88 337.5 L 158.63 334 L 156.88 330.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 335px; margin-left: 93px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">redirect</div></div></div></foreignObject><text x="93" y="338" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">redirect</text></switch></g><rect x="0" y="65" width="70" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 72px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><b>User Agent<br /></b></div></div></div></foreignObject><text x="2" y="84" fill="#000000" font-family="Helvetica" font-size="12px">User Agent&#xa;</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
