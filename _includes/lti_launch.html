<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="921px" viewBox="-0.5 -0.5 921 271" content="&lt;mxfile modified=&quot;2020-03-16T18:02:47.646Z&quot; host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:73.0) Gecko/20100101 Firefox/73.0&quot; etag=&quot;MNQbi6A7WyG9J6L42rxe&quot; version=&quot;12.8.5&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;NEN49luqhqemV9Vau6yv&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://app.diagrams.net/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:271px;"><defs/><g><path d="M 298 260 L 297.5 90" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 195 260 L 194.5 89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 490 260 L 490 90" fill="none" stroke="#b3b3b3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 20 108.5 L 183.64 113.79" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 188.88 113.96 L 181.77 117.24 L 183.64 113.79 L 182 110.24 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 112px; margin-left: 92px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">select task</div></div></div></foreignObject><text x="92" y="115" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">select task</text></switch></g><ellipse cx="192" cy="41.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 42px; margin-left: 156px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div align="center"><b>LTI Consumer<br /></b></div><div align="center"><b>(EDx, ...)</b><br /></div></div></div></div></foreignObject><text x="192" y="45" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LTI Consumer...</text></switch></g><ellipse cx="487.5" cy="37.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#858585" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 38px; margin-left: 452px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><div style="text-align: center"><span>Algorea </span><span>Backend</span></div></div></div></div></foreignObject><text x="452" y="41" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">Algorea Back...</text></switch></g><path d="M 637 260 L 637 85" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="637.5" cy="37.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 38px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><div style="text-align: center">Login Module</div></div></div></div></foreignObject><text x="602" y="41" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">Login Module</text></switch></g><ellipse cx="16.5" cy="27.13" rx="8.25" ry="8.125" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 16.5 35.25 L 16.5 62.33 M 16.5 40.67 L 0 40.67 M 16.5 40.67 L 33 40.67 M 16.5 62.33 L 0 84 M 16.5 62.33 L 33 84" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 16 260 L 16 94" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 20 160 L 191.72 162.82 C 191.78 158.92 197.78 159.01 197.72 162.91 L 197.72 162.91 L 294.72 164.5 C 294.78 160.6 300.78 160.7 300.72 164.6 L 300.72 164.6 L 487 167.66 C 487.06 163.76 493.06 163.85 493 167.75 L 493 167.75 L 623.63 169.9" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 628.88 169.98 L 621.83 173.37 L 623.63 169.9 L 621.94 166.37 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 160px; margin-left: 336px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>POST /lti/launch?content_id=1234&amp;redirect_to=&lt;cfr next request&gt; + all lti parameters<br /></div></div></div></div></foreignObject><text x="336" y="164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">POST /lti/launch?content_id=1234&amp;redirect_to=&lt;cfr next request&gt; + all lti parameters&#xa;</text></switch></g><path d="M 190 134 L 26.36 139.78" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 21.12 139.96 L 27.99 136.22 L 26.36 139.78 L 28.24 143.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 131px; margin-left: 102px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>iframe to &lt;cfr next request&gt;<br /></div></div></div></div></foreignObject><text x="102" y="134" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">iframe to &lt;cfr next request&gt;&#xa;</text></switch></g><path d="M 620 180 L 493 182.12 M 487 182.22 M 487 182.22 L 300.78 185.32 M 294.78 185.42 M 294.78 185.42 L 197.79 187.04 M 191.79 187.14 M 191.79 187.14 L 26.37 189.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 21.12 189.98 L 28.06 186.37 L 26.37 189.89 L 28.18 193.36 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 186px; margin-left: 316px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>Redirect 303 to https://spa.url/bare/?content_id=1234&amp;user_id=&lt;login-module-user-id&gt;<br /></div></div></div></div></foreignObject><text x="316" y="189" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Redirect 303 to https://spa.url/bare/?content_id=1234&amp;user_id=&lt;login-module-user-id&gt;&#xa;</text></switch></g><ellipse cx="297.5" cy="37.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 38px; margin-left: 262px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div style="text-align: center"><b>Algorea Frontend</b></div><div align="center">(SPA)<br /></div></div></div></div></foreignObject><text x="262" y="41" fill="#000000" font-family="Helvetica" font-size="12px">Algorea Fron...</text></switch></g><rect x="640" y="130" width="270" height="60" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 137px; margin-left: 642px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>validate LTI launch request</div><div>create LTI connection (links user_id, content_id, <br /></div><div>                                     lti_context_id, lti_user_id)<br /></div><div>create user if not existing<br /></div></div></div></div></foreignObject><text x="642" y="149" fill="#000000" font-family="Helvetica" font-size="12px">validate LTI launch request...</text></switch></g><rect x="300" y="210" width="620" height="60" fill="#ffffff" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 217px; margin-left: 302px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>check in local storage that<i> user_id</i> is last encountered user:</div><div><b>if user_id is the last known "login_id" (i.e., id from login-module) AND token is still valid:</b> use the last token </div><div><b>otherwise:</b> do "silent auth" (using the login module cookie, not prompting the user) [cfr auth workflow]</div></div></div></div></foreignObject><text x="302" y="229" fill="#000000" font-family="Helvetica" font-size="12px">check in local storage that user_id is last encountered user:...</text></switch></g><path d="M 20 200 L 283.65 219.53" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 288.89 219.92 L 281.65 222.89 L 283.65 219.53 L 282.16 215.91 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 214px; margin-left: 157px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>/bare/?content_id=1234</div><div>&amp;user_id=&lt;login-module-user-id&gt;</div></div></div></div></foreignObject><text x="157" y="218" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">/bare/?content_id=1234...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
