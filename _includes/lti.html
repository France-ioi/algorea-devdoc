<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="941px" viewBox="-0.5 -0.5 941 296" content="&lt;mxfile modified=&quot;2020-03-02T09:06:34.305Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:73.0) Gecko/20100101 Firefox/73.0&quot; etag=&quot;GUHul_Ia25KzxEEZo4bH&quot; version=&quot;12.7.9&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;NEN49luqhqemV9Vau6yv&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:296px;"><defs/><g><path d="M 298 290 L 297.5 90" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 195 294 L 194.5 89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 490 290 L 490 90" fill="none" stroke="#b3b3b3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 20 108.5 L 183.64 113.79" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 188.88 113.96 L 181.77 117.24 L 183.64 113.79 L 182 110.24 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 112px; margin-left: 92px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">select task</div></div></div></foreignObject><text x="92" y="115" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">select task</text></switch></g><ellipse cx="192" cy="41.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 73px; height: 1px; padding-top: 42px; margin-left: 156px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div align="center"><b>LTI Consumer<br /></b></div><div align="center"><b>(EDx, ...)</b><br /></div></div></div></div></foreignObject><text x="192" y="45" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LTI Consumer...</text></switch></g><ellipse cx="487.5" cy="37.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#858585" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 38px; margin-left: 452px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><div style="text-align: center"><span>Algorea </span><span>Backend</span></div></div></div></div></foreignObject><text x="452" y="41" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">Algorea Back...</text></switch></g><path d="M 637 290 L 637 85" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="637.5" cy="37.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 38px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; "><div style="text-align: center">Login Module</div></div></div></div></foreignObject><text x="602" y="41" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">Login Module</text></switch></g><ellipse cx="16.5" cy="27.13" rx="8.25" ry="8.125" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 16.5 35.25 L 16.5 62.33 M 16.5 40.67 L 0 40.67 M 16.5 40.67 L 33 40.67 M 16.5 62.33 L 0 84 M 16.5 62.33 L 33 84" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 16 294 L 16 94" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 20 160 L 191.68 162.81 C 191.74 158.91 197.74 159.01 197.68 162.91 L 197.68 162.91 L 294.69 164.5 C 294.75 160.6 300.75 160.7 300.69 164.6 L 300.69 164.6 L 487 167.66 C 487.06 163.76 493.06 163.85 493 167.75 L 493 167.75 L 623.63 169.9" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 628.88 169.98 L 621.83 173.37 L 623.63 169.9 L 621.94 166.37 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 160px; margin-left: 347px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>POST /lti/launch?redirect_to=&lt;frontendurl&gt; + all lti parameters (+ cookie from prev auth if any)<br /></div></div></div></div></foreignObject><text x="347" y="164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">POST /lti/launch?redirect_to=&lt;frontendurl&gt; + all lti parameters (+ cookie from prev auth if any)&#xa;</text></switch></g><path d="M 190 134 L 26.36 139.78" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 21.12 139.96 L 27.99 136.22 L 26.36 139.78 L 28.24 143.21 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 131px; margin-left: 102px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>iframe to &lt;cfr next request&gt;<br /></div></div></div></div></foreignObject><text x="102" y="134" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">iframe to &lt;cfr next request&gt;&#xa;</text></switch></g><path d="M 620 180 L 493 182.12 M 487 182.22 M 487 182.22 L 300.74 185.32 M 294.74 185.42 M 294.74 185.42 L 197.74 187.04 M 191.74 187.14 M 191.74 187.14 L 26.37 189.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 21.12 189.98 L 28.06 186.37 L 26.37 189.89 L 28.18 193.36 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 186px; margin-left: 316px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>Redirect 303 to &lt;frontend_url_to_item&gt;/?login_id=..., Set-Cookie:  ...<br /></div></div></div></div></foreignObject><text x="316" y="189" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Redirect 303 to &lt;frontend_url_to_item&gt;/?login_id=..., Set-Cookie:  ...&#xa;</text></switch></g><ellipse cx="297.5" cy="37.5" rx="37.5" ry="37.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 73px; height: 1px; padding-top: 38px; margin-left: 262px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div style="text-align: center"><b>Algorea Frontend</b></div><div align="center">(SPA)<br /></div></div></div></div></foreignObject><text x="262" y="41" fill="#000000" font-family="Helvetica" font-size="12px">Algorea Fron...</text></switch></g><rect x="650" y="130" width="290" height="90" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 137px; margin-left: 652px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>if cookie provided &amp; session matching input lti user_id:<br /></div><div>&nbsp;&nbsp;direct accept</div><div>else<br /></div><div>&nbsp;&nbsp;validate LTI launch request</div><div>&nbsp;&nbsp;auth lti user, create user if not existing<br /></div></div></div></div></foreignObject><text x="652" y="149" fill="#000000" font-family="Helvetica" font-size="12px">if cookie provided &amp; session matching input lti...</text></switch></g><rect x="300" y="200" width="320" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 207px; margin-left: 302px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div>check in local storage that<i> login_id</i> is last encountered user</div></div></div></div></foreignObject><text x="302" y="219" fill="#000000" font-family="Helvetica" font-size="12px">check in local storage that login_id is last encounte...</text></switch></g><path d="M 20 200 L 278.88 205.86" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 284.13 205.97 L 277.05 209.32 L 278.88 205.86 L 277.21 202.32 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 207px; margin-left: 155px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">/?login_id=..</div></div></div></foreignObject><text x="155" y="211" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">/?login_id=..</text></switch></g><rect x="306" y="230" width="624" height="24" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 235px; margin-left: 310px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><b>case 1: login_id is the last known user AND token is still valid:</b> use the last used token </div></div></div></foreignObject><text x="310" y="247" fill="#000000" font-family="Helvetica" font-size="12px">case 1: login_id is the last known user AND token is still valid: use the last used token </text></switch></g><rect x="306" y="254" width="624" height="26" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 259px; margin-left: 310px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><b>case 2: otherwise:</b> do "silent auth" (using the login module cookie, not prompting the user) [cfr auth workflow]</div></div></div></foreignObject><text x="310" y="271" fill="#000000" font-family="Helvetica" font-size="12px">case 2: otherwise: do "silent auth" (using the login module cookie, not prompting the user) [cfr auth wo...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
